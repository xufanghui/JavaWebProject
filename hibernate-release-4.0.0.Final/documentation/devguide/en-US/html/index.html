<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Hibernate Developer Guide</title><link rel="stylesheet" href="css/hibernate.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Hibernate Developer Guide"/><link rel="next" href="pref-Hibernate_Development_Guide-Preface.html" title="Preface"/></head><body><p id="title"><a href="http://www.hibernate.org" class="site_href"><strong>Hibernate.org</strong></a><a href="http://hibernate.org/Documentation/DocumentationOverview" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"/><li class="next"><a accesskey="n" href="pref-Hibernate_Development_Guide-Preface.html"><strong>Next</strong></a></li></ul><div class="book" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="d0e1"/>Hibernate Developer Guide</h1></div><div><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors">by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Gavin</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">King</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Christian</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Bauer</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Steve</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Ebersole</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Max</span> <span xmlns="http://www.w3.org/1999/xhtml" class="othername">Rydahl</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Andersen</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Emmanuel</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Bernard</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Hardy</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Ferentschik</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Adam</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Warski</span>, and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Gail</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Badner</span></div><div class="editors">edited by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Misty</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Stanley-Jones</span></div><div class="others">and thanks to <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">James</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Cobb</span> (Graphic Design) and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Cheyenne</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Weaver</span> (Graphic Design)</div></div></div><div><p class="releaseinfo">4.0.0.Final</p></div><div><p class="copyright">Copyright © 2011 Red Hat, Inc.</p></div><div><p class="pubdate">2011-12-14</p></div></div><hr/></div><div class="toc"><dl><dt><span class="preface"><a href="pref-Hibernate_Development_Guide-Preface.html">Preface</a></span></dt><dd><dl><dt><span class="section"><a href="pref-Hibernate_Development_Guide-Preface.html#d0e121">1. Get Involved</a></span></dt><dt><span class="section"><a href="pref-Hibernate_Development_Guide-Preface.html#d0e146">2. Getting Started Guide</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch01.html">1. Database access</a></span></dt><dd><dl><dt><span class="section"><a href="ch01.html#d0e157">1.1. Connecting</a></span></dt><dd><dl><dt><span class="section"><a href="ch01.html#d0e184">1.1.1. Configuration</a></span></dt><dt><span class="section"><a href="ch01.html#d0e277">1.1.2. Obtaining a JDBC connection</a></span></dt></dl></dd><dt><span class="section"><a href="ch01.html#d0e316">1.2. Connection pooling</a></span></dt><dd><dl><dt><span class="section"><a href="ch01.html#d0e324">1.2.1. c3p0 connection pool</a></span></dt><dt><span class="section"><a href="ch01.html#d0e353">1.2.2. Proxool connection pool</a></span></dt><dt><span class="section"><a href="ch01.html#d0e402">1.2.3. Obtaining connections from an application server, using JNDI</a></span></dt><dt><span class="section"><a href="ch01.html#d0e430">1.2.4. Other connection-specific configuration</a></span></dt><dt><span class="section"><a href="ch01.html#d0e449">1.2.5. Optional configuration properties</a></span></dt></dl></dd><dt><span class="section"><a href="ch01.html#configuring-dialects">1.3. Dialects</a></span></dt><dd><dl><dt><span class="section"><a href="ch01.html#d0e605">1.3.1. Specifying the Dialect to use</a></span></dt><dt><span class="section"><a href="ch01.html#d0e616">1.3.2. Dialect resolution</a></span></dt></dl></dd><dt><span class="section"><a href="ch01.html#d0e650">1.4. Automatic schema generation with SchemaExport</a></span></dt><dd><dl><dt><span class="section"><a href="ch01.html#d0e665">1.4.1. Customizing the mapping files</a></span></dt><dt><span class="section"><a href="ch01.html#d0e900">1.4.2. Running the SchemaExport tool</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="ch02.html">2. Transactions and concurrency control</a></span></dt><dd><dl><dt><span class="section"><a href="ch02.html#d0e1002">2.1. Defining Transaction</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1020">2.2. Physical Transactions</a></span></dt><dd><dl><dt><span class="section"><a href="ch02.html#d0e1053">2.2.1. Physical Transactions - JDBC</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1067">2.2.2. Physical Transactions - JTA</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1085">2.2.3. Physical Transactions - CMT</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1103">2.2.4. Physical Transactions - Custom</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1127">2.2.5. Physical Transactions - Legacy</a></span></dt></dl></dd><dt><span class="section"><a href="ch02.html#d0e1160">2.3. Hibernate Transaction Usage</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1176">2.4. Transaction Scopes</a></span></dt><dd><dl><dt><span class="section"><a href="ch02.html#session-per-operation">2.4.1. Session-per-operation</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1196">2.4.2. Session-per-request</a></span></dt><dt><span class="section"><a href="ch02.html#long-conversations">2.4.3. Conversations</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1325">2.4.4. Object identity</a></span></dt><dt><span class="section"><a href="ch02.html#transaction-antipatterns">2.4.5. Problems and anti-patterns</a></span></dt></dl></dd><dt><span class="section"><a href="ch02.html#hibernate-transaction-api">2.5. Hibernate Transaction API (JTA)</a></span></dt><dd><dl><dt><span class="section"><a href="ch02.html#d0e1448">2.5.1. Bean-managed transactions (BMT)</a></span></dt><dt><span class="section"><a href="ch02.html#d0e1470">2.5.2. Container-managed transactions (CMT)</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="ch03.html">3. Persistence Contexts</a></span></dt><dd><dl><dt><span class="section"><a href="ch03.html#d0e1602">3.1. Making entities persistent</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1660">3.2. Deleting entities</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1686">3.3. Obtain an entity reference without initializing its data</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1702">3.4. Obtain an entity with its data initialized</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1716">3.5. Refresh entity state</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1737">3.6. Modifying managed/persistent state</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1749">3.7. Working with detached data</a></span></dt><dd><dl><dt><span class="section"><a href="ch03.html#d0e1756">3.7.1. Reattaching detached data</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1799">3.7.2. Merging detached data</a></span></dt></dl></dd><dt><span class="section"><a href="ch03.html#d0e1818">3.8. Checking persistent state</a></span></dt><dt><span class="section"><a href="ch03.html#d0e1850">3.9. Accessing Hibernate APIs from JPA</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch04.html">4. Batch Processing</a></span></dt><dd><dl><dt><span class="section"><a href="ch04.html#d0e1891">4.1. Batch inserts</a></span></dt><dt><span class="section"><a href="ch04.html#d0e1909">4.2. Batch updates</a></span></dt><dt><span class="section"><a href="ch04.html#d0e1930">4.3. StatelessSession</a></span></dt><dt><span class="section"><a href="ch04.html#d0e2016">4.4. Hibernate Query Language for DML</a></span></dt><dd><dl><dt><span class="section"><a href="ch04.html#d0e2036">4.4.1. HQL for UPDATE and DELETE</a></span></dt><dt><span class="section"><a href="ch04.html#d0e2114">4.4.2. HQL syntax for INSERT</a></span></dt><dt><span class="section"><a href="ch04.html#d0e2182">4.4.3. More information on HQL</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="ch05.html">5. Locking</a></span></dt><dd><dl><dt><span class="section"><a href="ch05.html#d0e2223">5.1. Optimistic</a></span></dt><dd><dl><dt><span class="section"><a href="ch05.html#d0e2249">5.1.1. Dedicated version number</a></span></dt><dt><span class="section"><a href="ch05.html#d0e2370">5.1.2. Timestamp</a></span></dt></dl></dd><dt><span class="section"><a href="ch05.html#d0e2460">5.2. Pessimistic</a></span></dt><dd><dl><dt><span class="section"><a href="ch05.html#d0e2468">5.2.1. The <code class="classname">LockMode</code> class</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="ch06.html">6. Caching</a></span></dt><dd><dl><dt><span class="section"><a href="ch06.html#d0e2599">6.1. The query cache</a></span></dt><dd><dl><dt><span class="section"><a href="ch06.html#d0e2651">6.1.1. Query cache regions</a></span></dt></dl></dd><dt><span class="section"><a href="ch06.html#d0e2674">6.2. Second-level cache providers</a></span></dt><dd><dl><dt><span class="section"><a href="ch06.html#d0e2683">6.2.1. Configuring your cache providers</a></span></dt><dt><span class="section"><a href="ch06.html#caching-strategies-list">6.2.2. Caching strategies</a></span></dt><dt><span class="section"><a href="ch06.html#caching-provider-table">6.2.3. Second-level cache providers for Hibernate</a></span></dt></dl></dd><dt><span class="section"><a href="ch06.html#d0e3066">6.3. Managing the cache</a></span></dt><dd><dl><dt><span class="section"><a href="ch06.html#d0e3069">6.3.1. Moving items into and out of the cache</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="ch07.html">7. Services</a></span></dt><dd><dl><dt><span class="section"><a href="ch07.html#d0e3230">7.1. What are services?</a></span></dt><dt><span class="section"><a href="ch07.html#d0e3235">7.2. Service contracts</a></span></dt><dt><span class="section"><a href="ch07.html#d0e3254">7.3. Service dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="ch07.html#d0e3259">7.3.1. @<code class="interfacename">org.hibernate.service.spi.InjectService</code></a></span></dt><dt><span class="section"><a href="ch07.html#d0e3291">7.3.2. <code class="interfacename">org.hibernate.service.spi.ServiceRegistryAwareService</code></a></span></dt></dl></dd><dt><span class="section"><a href="ch07.html#services-registry">7.4. ServiceRegistry</a></span></dt><dt><span class="section"><a href="ch07.html#d0e3327">7.5. Standard services</a></span></dt><dd><dl><dt><span class="section"><a href="ch07.html#services-BatchBuilder">7.5.1. <code class="interfacename">org.hibernate.engine.jdbc.batch.spi.BatchBuilder</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-ConfigurationService">7.5.2. <code class="interfacename">org.hibernate.service.config.spi.ConfigurationService</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-ConnectionProvider">7.5.3. <code class="interfacename">org.hibernate.service.jdbc.connections.spi.ConnectionProvider</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-DialectFactory">7.5.4. <code class="interfacename">org.hibernate.service.jdbc.dialect.spi.DialectFactory</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-DialectResolver">7.5.5. <code class="interfacename">org.hibernate.service.jdbc.dialect.spi.DialectResolver</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-JdbcServices">7.5.6. <code class="interfacename">org.hibernate.engine.jdbc.spi.JdbcServices</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-JmxService">7.5.7. <code class="interfacename">org.hibernate.service.jmx.spi.JmxService</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-JndiService">7.5.8. <code class="interfacename">org.hibernate.service.jndi.spi.JndiService</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-JtaPlatform">7.5.9. <code class="interfacename">org.hibernate.service.jta.platform.spi.JtaPlatform</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-MultiTenantConnectionProvider">7.5.10. <code class="interfacename">org.hibernate.service.jdbc.connections.spi.MultiTenantConnectionProvider</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-PersisterClassResolver">7.5.11. <code class="interfacename">org.hibernate.persister.spi.PersisterClassResolver</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-PersisterFactory">7.5.12. <code class="interfacename">org.hibernate.persister.spi.PersisterFactory</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-RegionFactory">7.5.13. <code class="interfacename">org.hibernate.cache.spi.RegionFactory</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-SessionFactoryServiceRegistryFactory">7.5.14. <code class="interfacename">org.hibernate.service.spi.SessionFactoryServiceRegistryFactory</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-Statistics">7.5.15. <code class="interfacename">org.hibernate.stat.Statistics</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-TransactionFactory">7.5.16. <code class="interfacename">org.hibernate.engine.transaction.spi.TransactionFactory</code></a></span></dt><dt><span class="section"><a href="ch07.html#services-ImportSqlCommandExtractor">7.5.17. <code class="interfacename">org.hibernate.tool.hbm2ddl.ImportSqlCommandExtractor</code></a></span></dt></dl></dd><dt><span class="section"><a href="ch07.html#d0e4121">7.6. Custom services</a></span></dt><dt><span class="section"><a href="ch07.html#d0e4164">7.7. Special service registries</a></span></dt><dd><dl><dt><span class="section"><a href="ch07.html#services-registry-bootstrap">7.7.1. Boot-strap registry</a></span></dt><dt><span class="section"><a href="ch07.html#services-registry-sessionfactory">7.7.2. SessionFactory registry</a></span></dt></dl></dd><dt><span class="section"><a href="ch07.html#services-use">7.8. Using services and registries</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch08.html">8. Data categorizations</a></span></dt><dd><dl><dt><span class="section"><a href="ch08.html#value-types">8.1. Value types</a></span></dt><dd><dl><dt><span class="section"><a href="ch08.html#value-basic-types">8.1.1. Basic types</a></span></dt><dt><span class="section"><a href="ch08.html#value-composite-types">8.1.2. Composite types</a></span></dt><dt><span class="section"><a href="ch08.html#value-collection-types">8.1.3. Collection types</a></span></dt></dl></dd><dt><span class="section"><a href="ch08.html#entity-types">8.2. Entity Types</a></span></dt><dt><span class="section"><a href="ch08.html#d0e4708">8.3. Implications of different data categorizations</a></span></dt></dl></dd><dt><span class="chapter"><a href="devguide-mappingEntities.html">9. Mapping entities</a></span></dt><dd><dl><dt><span class="section"><a href="devguide-mappingEntities.html#d0e4716">9.1. Hierarchies</a></span></dt></dl></dd><dt><span class="chapter"><a href="ch10.html">10. Mapping associations</a></span></dt><dt><span class="chapter"><a href="chap-hql.html">11. HQL and JPAQL</a></span></dt><dt><span class="chapter"><a href="ch12.html">12. Criteria</a></span></dt><dt><span class="chapter"><a href="ch13.html">13. Native-SQL</a></span></dt><dt><span class="chapter"><a href="ch14.html">14. JMX</a></span></dt><dt><span class="chapter"><a href="ch15.html">15. Envers</a></span></dt><dd><dl><dt><span class="section"><a href="ch15.html#d0e4757">15.1. Basics</a></span></dt><dt><span class="section"><a href="ch15.html#d0e4792">15.2. Configuration</a></span></dt><dt><span class="section"><a href="ch15.html#d0e4988">15.3. Additional mapping annotations</a></span></dt><dt><span class="section"><a href="ch15.html#d0e5035">15.4. Choosing an audit strategy</a></span></dt><dt><span class="section"><a href="ch15.html#envers-revisionlog">15.5. Revision Log</a></span></dt><dd><dl><dt><span class="section"><a href="ch15.html#envers-tracking-modified-entities-revchanges">15.5.1. Tracking entity names modified during revisions</a></span></dt></dl></dd><dt><span class="section"><a href="ch15.html#envers-queries">15.6. Queries</a></span></dt><dd><dl><dt><span class="section"><a href="ch15.html#entities-at-revision">15.6.1. Querying for entities of a class at a given revision</a></span></dt><dt><span class="section"><a href="ch15.html#revisions-of-entity">15.6.2. Querying for revisions, at which entities of a given class changed</a></span></dt><dt><span class="section"><a href="ch15.html#envers-tracking-modified-entities-queries">15.6.3. Querying for entities modified in a given revision</a></span></dt></dl></dd><dt><span class="section"><a href="ch15.html#d0e5431">15.7. Conditional auditing</a></span></dt><dt><span class="section"><a href="ch15.html#d0e5469">15.8. Understanding the Envers Schema</a></span></dt><dt><span class="section"><a href="ch15.html#envers-generateschema">15.9. Generating schema with Ant</a></span></dt><dt><span class="section"><a href="ch15.html#envers-mappingexceptions">15.10. Mapping exceptions</a></span></dt><dd><dl><dt><span class="section"><a href="ch15.html#d0e5541">15.10.1. What isn't and will not be supported</a></span></dt><dt><span class="section"><a href="ch15.html#d0e5561">15.10.2. What isn't and <span class="emphasis"><em>will</em></span> be supported</a></span></dt><dt><span class="section"><a href="ch15.html#d0e5571">15.10.3. <code class="literal">@OneToMany</code>+<code class="literal">@JoinColumn</code></a></span></dt></dl></dd><dt><span class="section"><a href="ch15.html#envers-partitioning">15.11. Advanced: Audit table partitioning</a></span></dt><dd><dl><dt><span class="section"><a href="ch15.html#envers-partitioning-benefits">15.11.1. Benefits of audit table partitioning</a></span></dt><dt><span class="section"><a href="ch15.html#envers-partitioning-columns">15.11.2. Suitable columns for audit table partitioning</a></span></dt><dt><span class="section"><a href="ch15.html#envers-partitioning-example">15.11.3. Audit table partitioning example</a></span></dt></dl></dd><dt><span class="section"><a href="ch15.html#envers-links">15.12. Envers links</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendix-Configuration_Properties.html">A. Configuration properties</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-Configuration_Properties.html#d0e5988">A.1. General Configuration</a></span></dt><dt><span class="section"><a href="appendix-Configuration_Properties.html#d0e6163">A.2. Database configuration</a></span></dt><dt><span class="section"><a href="appendix-Configuration_Properties.html#d0e6559">A.3. Connection pool properties</a></span></dt></dl></dd><dt><span class="appendix"><a href="appe-Hibernate_Development_Guide-Revision_History.html">B. Revision History</a></span></dt><dt><span class="index"><a href="ix01.html">Index</a></span></dt></dl></div></div><HR xmlns=""/><a xmlns="" href=""><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2011 Red Hat, Inc.</p></a><ul class="docnav"><li class="previous"/><li class="next"><a accesskey="n" href="pref-Hibernate_Development_Guide-Preface.html"><strong>Next</strong>Preface</a></li></ul></body></html>